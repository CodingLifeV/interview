## 分页和分段

[分页和分段的联系和区别](https://cloud.tencent.com/developer/article/1344772)

**分页存储：**

基本思想：

用户程序的地址空间被划分成若干固定大小的区域，称为-页，相应地，内存空间分成若干个物理块，页和块的大小相等。可将用户程序的任一页放在内存的任一块中，实现了离散分配。由一个页表来维护它们之间的映射关系。

页表：

分页系统中，允许将进程的每一页离散地存储在内存的任一物理块中，为了能在内存中找到每个页面对应的物理块，系统为每个进程建立一张页面映射表，简称页表。页表的作用是实现从页号到物理块号的地址映射。

**分段存储：**

将用户程序地址空间分成若干个大小不等的段，每段可以定义一组相对完整的逻辑信息。存储分配时，以段为单位，段与段在内存中可以不相邻接，也实现了离散分配。

**区别:**

1. 页是信息的物理单位，分页是为了实现非连续分配，以便解决内存碎片问题，或者说分页是由于系统管理的需要；段是信息的逻辑单位，它含有一组意义相对完整的信息，分段的目的是为了更好地实现共享，满足用户的需要

2. 页的大小固定，由系统确定，将逻辑地址划分为页号和页内地址是由机器硬件实现的；而段的长度却不固定，决定于用户所编写的程序，通常由编译程序在对源程序进行编译时根据信息的性质来划分。

3. 分页的作业地址空间是一维的；分段的地址空间是二维的

## CPU 调度算法

## 页面置换算法

**最优置换（OPT）算法**

最理想的状态下，我们给页面做个标记，挑选一个最远才会被再次用到的页面。当然，这样的算法不可能实现，因为不确定一个页面在何时会被用到。

**先进先出置换（FIFO）算法：**

基本思想是：当需要淘汰一个页面时，总是选择驻留主存时间最长的页面进行淘汰，即先进入主存的页面先淘汰。其理由是：最早调入主存的页面不再被使用的可能性最大。

**最近最久未使用（LRU）算法：**

基本思想是：利用局部性原理，根据一个作业在执行过程中过去的页面访问历史来推测未来的行为。它认为过去一段时间里不曾被访问过的页面，在最近的将来可能也不会再被访问。所以，这种算法的实质是：当需要淘汰一个页面时，总是选择在最近一段时间内最久不用的页面予以淘汰。

该算法赋予每个页面一个访问字段，用来记录一个页面自上次被访问以来所经历的时间 t，当须淘汰一个页面时，选择现有页面中其 t 值最大的，即最近最少使用的页面予以淘汰。

LRU 使用了哈希链表来实现。在哈希链表中，key-value 对在逻辑上是相互关联的，采用的双向链表的形式组织 key-value 对，使得原本无序的哈希表变成在逻辑上具有前驱和后继的结构。

**最近最少使用页面置换（LRU）算法：**

算法根据数据的历史访问记录来进行淘汰数据，其核心思想是：如果数据最近被访问过，那么将来被访问的几率也更高。

## 虚拟内存和物理内存

**物理内存：**

物理上真实的内存大小

**虚拟内存：**

进程运行时所有内存空间的总和。正在运行的一个进程，不是所有数据都能一起加载到内存（物理内存）中，势必有一部分数据要放到其他介质中（比如硬盘），待进程需要访问那部分数据时，在通过调度进入物理内存。

每个进程拥有自己的地址空间，这个地址空间被分割成多个块，每一块称为一页。这些页被映射到物理内存，但不需要映射到连续的物理内存，也不需要所有页都必须在物理内存中。
